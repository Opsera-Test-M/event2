# Quick QA Diagnostic
name: "ğŸ” Diagnose QA"
on:
  workflow_dispatch:

env:
  AWS_REGION: us-west-2
  
jobs:
  diagnose:
    runs-on: ubuntu-latest
    steps:
      - name: Configure AWS
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ env.AWS_REGION }}
          
      - name: Check QA Resources
        run: |
          aws eks update-kubeconfig --name argocd-usw2 --region ${{ env.AWS_REGION }}
          
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "ğŸ“Š QA NAMESPACE STATUS"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          
          echo ""
          echo "ğŸ” Namespace:"
          kubectl get namespace plan-and-joy-qa || echo "âŒ Not found"
          
          echo ""
          echo "ğŸ” All resources in plan-and-joy-qa:"
          kubectl get all -n plan-and-joy-qa || echo "âŒ No resources"
          
          echo ""
          echo "ğŸ” Ingress:"
          kubectl get ingress -n plan-and-joy-qa -o yaml || echo "âŒ No ingress"
          
          echo ""
          echo "ğŸ” Certificates:"
          kubectl get certificates -n plan-and-joy-qa || echo "âŒ No certs"
          
          echo ""
          echo "ğŸ” Certificate Requests:"
          kubectl get certificaterequests -n plan-and-joy-qa || echo "âŒ No cert requests"
          
          echo ""
          echo "ğŸ” Events (last 10):"
          kubectl get events -n plan-and-joy-qa --sort-by='.lastTimestamp' | tail -10 || echo "âŒ No events"
